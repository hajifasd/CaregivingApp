<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>护理助手 - 消息中心</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 引入自定义样式 -->
    <link href="css/components.css" rel="stylesheet">
    <!-- 引入JavaScript模块 -->
    <script src="js/pageBuilder.js"></script>
    <script src="js/common.js"></script>
    <script src="js/modules/auth.js"></script>
    <script src="js/modules/navigation.js"></script>
    <script src="js/modules/ui.js"></script>
    
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        accent: '#722ED1',
                        neutral: '#F5F7FA',
                        'neutral-dark': '#4E5969',
                        success: '#52C41A',
                        warning: '#FAAD14',
                        danger: '#FF4D4F',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .card-shadow {
                @apply shadow-sm hover:shadow-md transition-shadow duration-300;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-gray-800">
    <!-- 页面内容 -->
    <main class="p-6 bg-gray-50">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold">消息中心</h2>
            <button id="mark-all-read-btn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-1 transition-colors">
                <i class="fa fa-check-double"></i>
                <span>全部已读</span>
            </button>
        </div>
        
        <!-- 消息统计 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white rounded-xl p-4 card-shadow text-center">
                <div class="text-2xl font-bold text-primary mb-1">24</div>
                <div class="text-sm text-gray-600">总消息数</div>
            </div>
            <div class="bg-white rounded-xl p-4 card-shadow text-center">
                <div class="text-2xl font-bold text-blue-600 mb-1">8</div>
                <div class="text-sm text-gray-600">未读消息</div>
            </div>
            <div class="bg-white rounded-xl p-4 card-shadow text-center">
                <div class="text-2xl font-bold text-warning mb-1">5</div>
                <div class="text-sm text-gray-600">系统通知</div>
            </div>
            <div class="bg-white rounded-xl p-4 card-shadow text-center">
                <div class="text-2xl font-bold text-success mb-1">11</div>
                <div class="text-sm text-gray-600">护工消息</div>
            </div>
        </div>
        
        <!-- 消息列表 -->
        <div class="bg-white rounded-xl card-shadow overflow-hidden">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold">消息列表</h3>
            </div>
            
            <div class="divide-y divide-gray-200">
                <!-- 消息项目1 -->
                <div class="p-6 hover:bg-gray-50 transition-colors">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                            <i class="fa fa-user text-primary text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-start justify-between mb-2">
                                <h4 class="font-semibold text-lg">李阿姨</h4>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-gray-500">2小时前</span>
                                    <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-2">张阿姨您好，我已经到达您家附近，预计5分钟后到达。请问您今天需要我协助哪些护理工作？</p>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span>护工消息</span>
                                <span>预约相关</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 transition-colors">
                                回复
                            </button>
                            <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors">
                                查看详情
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 消息项目2 -->
                <div class="p-6 hover:bg-gray-50 transition-colors">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-warning/10 flex items-center justify-center flex-shrink-0">
                            <i class="fa fa-bell text-warning text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-start justify-between mb-2">
                                <h4 class="font-semibold text-lg">系统通知</h4>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-gray-500">1天前</span>
                                    <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-2">您的预约"李阿姨 - 居家护理"将于明天上午8:00开始，请提前做好准备。如有疑问，请联系客服。</p>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span>系统通知</span>
                                <span>预约提醒</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 transition-colors">
                                查看详情
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 消息项目3 -->
                <div class="p-6 hover:bg-gray-50 transition-colors">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-success/10 flex items-center justify-center flex-shrink-0">
                            <i class="fa fa-user text-success text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-start justify-between mb-2">
                                <h4 class="font-semibold text-lg">王叔叔</h4>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-gray-500">2天前</span>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-2">张阿姨，今天的康复训练已经完成。我注意到您的恢复情况很好，建议继续保持当前的训练强度。明天我会继续为您服务。</p>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span>护工消息</span>
                                <span>服务报告</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 transition-colors">
                                回复
                            </button>
                            <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors">
                                查看详情
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 消息项目4 -->
                <div class="p-6 hover:bg-gray-50 transition-colors">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-info/10 flex items-center justify-center flex-shrink-0">
                            <i class="fa fa-info-circle text-info text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-start justify-between mb-2">
                                <h4 class="font-semibold text-lg">客服中心</h4>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-gray-500">3天前</span>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-2">感谢您使用护理助手服务！我们很高兴地通知您，您的账户已升级为VIP用户，享受更多专属服务和优惠。如有任何问题，请随时联系我们。</p>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span>客服消息</span>
                                <span>账户升级</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 transition-colors">
                                联系客服
                            </button>
                            <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors">
                                查看详情
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 消息项目5 -->
                <div class="p-6 hover:bg-gray-50 transition-colors">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                            <i class="fa fa-user text-primary text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-start justify-between mb-2">
                                <h4 class="font-semibold text-lg">张护士</h4>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-gray-500">1周前</span>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-2">张阿姨，我已经完成了本周的护理服务总结报告。您的健康状况保持稳定，建议继续保持良好的生活习惯。下周我会继续为您提供专业护理服务。</p>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span>护工消息</span>
                                <span>服务总结</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 transition-colors">
                                回复
                            </button>
                            <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors">
                                查看详情
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 分页 -->
        <div class="flex justify-center mt-8">
            <nav class="flex items-center space-x-2">
                <button class="px-3 py-2 text-gray-500 hover:text-primary disabled:opacity-50" disabled>
                    <i class="fa fa-chevron-left"></i>
                </button>
                <button class="px-3 py-2 bg-primary text-white rounded-lg">1</button>
                <button class="px-3 py-2 text-gray-500 hover:text-primary hover:bg-gray-100 rounded-lg">2</button>
                <button class="px-3 py-2 text-gray-500 hover:text-primary hover:bg-gray-100 rounded-lg">3</button>
                <button class="px-3 py-2 text-gray-500 hover:text-primary hover:bg-gray-100 rounded-lg">
                    <i class="fa fa-chevron-right"></i>
                </button>
            </nav>
        </div>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 检查用户登录状态
            checkUserLogin();
            
            // 全部已读按钮
            const markAllReadBtn = document.getElementById('mark-all-read-btn');
            if (markAllReadBtn) {
                markAllReadBtn.addEventListener('click', function() {
                    if (confirm('确定要将所有消息标记为已读吗？')) {
                        markAllAsRead();
                    }
                });
            }
            
            // 消息操作按钮
            document.querySelectorAll('button').forEach(button => {
                if (button.textContent.includes('回复')) {
                    button.addEventListener('click', function() {
                        const messageCard = this.closest('.p-6');
                        const senderName = messageCard.querySelector('h4').textContent;
                        showReplyDialog(senderName);
                    });
                }
                
                if (button.textContent.includes('查看详情')) {
                    button.addEventListener('click', function() {
                        const messageCard = this.closest('.p-6');
                        const senderName = messageCard.querySelector('h4').textContent;
                        const messageContent = messageCard.querySelector('p').textContent;
                        showMessageDetail(senderName, messageContent);
                    });
                }
                
                if (button.textContent.includes('联系客服')) {
                    button.addEventListener('click', function() {
                        alert('正在为您连接客服...');
                    });
                }
            });
        });
        
        // 标记所有消息为已读
        function markAllAsRead() {
            const unreadIndicators = document.querySelectorAll('.w-3.h-3.bg-blue-500.rounded-full');
            unreadIndicators.forEach(indicator => {
                indicator.style.display = 'none';
            });
            
            // 更新未读消息数量
            const unreadCountElement = document.querySelector('.text-2xl.font-bold.text-blue-600');
            if (unreadCountElement) {
                unreadCountElement.textContent = '0';
            }
            
            alert('所有消息已标记为已读');
        }
        
        // 显示回复对话框
        function showReplyDialog(senderName) {
            const reply = prompt(`回复 ${senderName}：`);
            if (reply && reply.trim()) {
                alert('回复已发送');
                // 这里可以添加实际的回复逻辑
            }
        }
        
        // 显示消息详情
        function showMessageDetail(senderName, messageContent) {
            alert(`消息详情：\n发送者：${senderName}\n内容：${messageContent}`);
        }
        
        // 检查用户登录状态
        function checkUserLogin() {
            const token = localStorage.getItem('user_token');
            if (!token) {
                alert('请先登录');
                window.location.href = '/';
                return;
            }
        }
    </script>
</body>
</html>
