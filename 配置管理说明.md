# 护工资源管理系统 - 配置管理说明

## 概述

为了支持团队成员使用不同的数据库配置，我们提供了多种配置管理方案。每个开发者可以根据自己的本地环境设置数据库连接参数，而不会影响其他团队成员。

## 配置方案

### 方案1：环境变量文件 (.env) - 推荐

**优点：**
- 标准的环境变量管理方式
- 支持不同环境（开发、测试、生产）
- 安全性高，不会被意外提交到版本控制

**使用方法：**
1. 复制 `env.example` 文件为 `.env`
2. 编辑 `.env` 文件，修改数据库配置
3. 安装 python-dotenv 包：`pip install python-dotenv`

**示例：**
```bash
# 复制示例文件
cp env.example .env

# 编辑配置
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USERNAME=root
MYSQL_PASSWORD=your_password
MYSQL_DATABASE=caregiving_db
```

### 方案2：本地配置文件 (config_local.py) - 简单易用

**优点：**
- 简单直接，易于理解
- 支持代码补全和语法高亮
- 可以包含注释和说明

**使用方法：**
1. 运行配置管理脚本：`python config_manager.py`
2. 选择选项2创建本地配置文件
3. 编辑 `back/config/config_local.py` 文件

**示例：**
```python
# MySQL 主机地址
MYSQL_HOST = "localhost"

# MySQL 端口号
MYSQL_PORT = "3306"

# MySQL 用户名
MYSQL_USERNAME = "root"

# MySQL 密码
MYSQL_PASSWORD = "your_password_here"
```

### 方案3：交互式配置 - 最友好

**使用方法：**
1. 运行配置管理脚本：`python config_manager.py`
2. 选择选项3进行交互式配置
3. 按提示输入数据库参数

## 快速开始

### 步骤1：运行配置管理脚本

```bash
python config_manager.py
```

### 步骤2：选择配置方式

推荐选择选项5（执行所有操作），这会：
- 创建环境变量示例文件
- 创建本地配置文件
- 更新 .gitignore 文件

### 步骤3：修改配置

根据您的本地MySQL环境修改配置：

**常见配置示例：**

| 开发者 | 主机 | 端口 | 用户名 | 密码 | 数据库名 |
|--------|------|------|--------|------|----------|
| 开发者A | localhost | 3306 | root | password123 | caregiving_db |
| 开发者B | 127.0.0.1 | 3307 | caregiving_user | mypassword | caregiving_dev |
| 开发者C | localhost | 3306 | root | 123456 | caregiving_test |

### 步骤4：验证配置

启动应用验证配置是否正确：

```bash
cd back
python app.py
```

## 配置优先级

系统按以下优先级加载配置：

1. **环境变量** (最高优先级)
2. **本地配置文件** (config_local.py)
3. **默认配置** (settings.py)

## 安全注意事项

1. **不要提交敏感信息**：确保 `.env` 和 `config_local.py` 文件不会被提交到版本控制系统
2. **使用强密码**：生产环境应使用强密码
3. **定期更新密钥**：定期更新应用密钥和管理员密码

## 团队协作

### 新成员加入

1. 克隆项目
2. 运行 `python config_manager.py`
3. 选择选项5执行所有操作
4. 根据本地环境修改配置
5. 测试连接

### 配置变更

如果团队需要修改默认配置：
1. 更新 `env.example` 文件
2. 更新 `back/config/settings.py` 中的默认值
3. 通知团队成员更新本地配置

## 故障排除

### 常见问题

**Q: 连接数据库失败**
A: 检查以下项目：
- MySQL服务是否启动
- 主机地址和端口是否正确
- 用户名和密码是否正确
- 数据库是否存在

**Q: 配置文件不生效**
A: 检查配置优先级：
- 确认环境变量没有覆盖本地配置
- 检查配置文件语法是否正确
- 重启应用

**Q: 权限错误**
A: 确保MySQL用户有足够权限：
```sql
GRANT ALL PRIVILEGES ON caregiving_db.* TO 'username'@'localhost';
FLUSH PRIVILEGES;
```

## 文件说明

| 文件 | 用途 | 是否提交到Git |
|------|------|---------------|
| `env.example` | 环境变量示例 | ✅ |
| `.env` | 本地环境变量 | ❌ |
| `back/config/settings.py` | 主配置文件 | ✅ |
| `back/config/config_local.py` | 本地配置文件 | ❌ |
| `config_manager.py` | 配置管理脚本 | ✅ |
| `.gitignore` | Git忽略文件 | ✅ |

## 联系支持

如果遇到配置问题，请联系项目维护者或查看项目文档。 